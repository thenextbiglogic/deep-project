var version="1.0.0.0",name="Project Maestro ",utils={Logger:require("../js/app-log.util.min"),Constants:require("../js/app-contants.util.min")},viewEngineSet=!1,dirname=__dirname,allowedRoutes=[];const express=require("express"),port=process.env.port||1304,app=express(),viewEngine=utils.Constants.view.engine,path=require("path");var server={getVersion:function(){return this.version},getExpress:function(){return this.app()},getName:function(){return this.name},configure:{app:function(e){e?(e.route||(e.route=utils.Constants.appRoot),e.dirname&&(dirname=e.dirname),e.useViewEngine&&(utils.Logger.info("Setting up views path to :"+dirname),this.views(dirname)),utils.Logger.info("Configuring Express server"),utils.Logger.info("Starting Express server"),server.Serve(e),e.port||(e.port=port),app.listen(e.port,()=>{utils.Logger.info("Listening on port:"+e.port)})):utils.Logger.info("Options not set. Cannot initialize Express Server")},views:function(e){allowedRoutes=utils.Constants.routes.allowed(e),app?viewEngineSet||(utils.Logger.info(allowedRoutes.views),app.use(express.static(path.join(e,"src/styles"))),app.use(express.static(path.join(e,utils.Constants.paths.common))),app.use(express.static(path.join(e,utils.Constants.paths.externalLibs))),app.use(express.static(path.join(e,utils.Constants.paths.public.views))),app.set("views",allowedRoutes.views),app.engine("html",require("ejs").renderFile),app.set("view engine","html"),viewEngineSet=!0):utils.Logger.error("app not initialized")}}};Object.defineProperty(server,"version",{get:function(){return version},IEnumerable:!0,configurable:!1}),Object.defineProperty(server,"name",{get:function(){return name},set:function(e){server.name=e},IEnumerable:!0,configurable:!1}),server.Serve=function(e){app.get(e.route,function(t,n){var i="Express Server Started. Proxying through browser Sync API";utils.Logger.info(i),!viewEngineSet&&e.useViewEngine?(i+="View Engine not set",utils.Logger.info(i),n.send(i)):e.useViewEngine?n.render(path.join(dirname,utils.Constants.paths.public.views)+"index.view.html",{title:"Home",name:name,data:{Message:i,Time:(new Date).toString()}}):n.send(i)}),app.get("/123",function(e,t){var n="Serving on different url. URL:"+e.url;utils.Logger.info(n),viewEngineSet?t.send(n):(n+="View Engine not set",utils.Logger.info(n),t.sendFile(utils.Constants.paths.public.views+"index.view.html"))})},module.exports=server;